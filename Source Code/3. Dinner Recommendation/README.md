# :pushpin: Dinner Recommendation
>이미지 분류 알고리즘을 통해 추정된 음식과 반찬 예측 알고리즘을 통해 예측된 반찬을 기반으로 FP-Growth 모델과 DBSCAN모델을 활용한 저녁 추천 알고리즘

---

## 1. 데이터 수집 및 전처리

### 1.1. 데이터 수집

#### `1일 영양소 권장 섭취량 데이터`

| **컬럼명** | **타입** | **설명** |
| :-- | :-- | :-- |
| 성별 | Object | 남자 또는 여자 |
| 연령대 | Object | 6-8, 9-11, 12-14, 15-18, 19-29, 30-49, 50-64, 65-74, 75이상 |
| 에너지 | float | Kcal |
| 탄수화물 | float | g |
| 단백질 | float | g |
| 나트륨 | float | g |

---

### 1.2. 전처리

#### `1일 영양소 권장 섭취량 데이터의 파생변수(지방, 당) 추가`

|  | **원본** | **전처리** |
| :-- | :-- | :-- |
| **컬럼수** | 6 | 8 |
| **비고** |  | - 파생변수(지방, 당) 추가 |

#### `식품영양성분DB 차원 축소 및 메인메뉴 추출` 
<!-- (메뉴명, 에너지, 탄수화물, 단백질, 지방, 나트륨, 당) -->

|  | **원본** | **전처리** |
| :-- | :-- | :-- |
| **컬럼수** | 100 | 8 |
| **메뉴수** | 7,704 | 218 |
| **비고** |  | - 메뉴명, 에너지, 탄수화물, 단백질, 지방, 나트륨, 당 |
|  |  | - 파생변수(군집명) 추가 |
|  |  | - 기본 **밥** 및 **반찬** 또는 **제과제빵**으로 보이는 메뉴 **제외** |

---

## 2. Cluster Analysis

#### `Residual Nutrient Calculation`

|  | **1일 영양소 권잡 섭취량** | **취식 영양소** | **잔여 영양소** |
| :-- | :-- | :-- | :-- |
| **에너지** | 2507.11 | 1500.0 | **1007.11** |
| **탄수화물** | 261.39 | 130.0 | **131.39** |
| **단백질** | 134.74 | 50.0 | **84.74** |
| **지방** | 102.56 | 50.0 | **52.56** |
| **당** | 43.42 | 37.5 | **5.92** |
| **나트륨** | 6.49 | 2.0 | **4.49** |

#### `Comparison of K-Means and DBSCAN`

|  | **K-Means** | **FP-Growth** |
| :-- | :-- | :-- |
| **기본 개념** | 중심 기반으로 군집을 형성하는 방법 | 밀도를 기준으로 군집을 형성하는 방법 |
| **군집 모양** | 원형 군집에 더 적합 | 임의의 모양을 가진 군집에 더 적합 |
| **하이퍼파라미터** | 클러스터 개수(k) | 최소 이웃 거리(eps), 최소 이웃 개수(min_samples)  |
| **클러스터 수** | 클러스터 수를 사전에 알고 있어야 함 | 자동으로 클러스터 수를 결정함 |
| **장점** | - 간단하고 직관적인 알고리즘 | - 데이터의 분포에 따라 임의의 모양과 크기의 군집을 찾을 수 있음 |
|  | - 대용량 데이터에도 효율적으로 처리 가능 | - 클러스터의 개수를 사전에 알 필요 없이 자동으로 결정됨 |
|  | - 수렴 속도가 빠름 | - 이상치에 강건함 |
|  | - 원형 군집에 적합 | - 밀도 기반으로 군집을 찾기 때문에 밀집된 영역에 강건함 |
| **단점** | - 초기 중심점의 선택에 따라 결과가 달라질 수 있음 | - 밀집도 파라미터에 민감하며 적절한 파라미터 설정이 필요함 |
|  | - 이상치에 민감함 | 고차원 데이터에 대한 성능이 떨어질 수 있음 |	
|  | - 클러스터의 개수(k)를 미리 정해야 함 |  |	
|  | - 임의의 모양과 크기를 가진 군집에 적합하지 않음 |  |	
   
>잔여 영양소를 계산하여 중심 데이터와의 차이를 통해 거리 계산을 하는 방식 채택하였습니다.   <br>
>따라서 군집의 모양이 정해져 있지 않고, 밀도를 기준으로 군집을 형성하는 DBSCAN방식이 더 적합하다고 판단하였습니다.    <br>

### 2.1. 학습 결과

#### `Fine-tuning`

|  | **1** | **2** | **3** | **4** | **5** | **6** | **7** | **8** | **9** | **10** | **11** | **12** | **13** |
| :-- | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: |
| **Epsilon** | 50 | 60 | 70 | 80 | 90 | 100 | 110 | 120 | 130 | 140 | 150 | 175 | 200 |
| **Clusters Count** | 10 | 9 | 9 | 7 | 10 | 10 | 10 | 10 | 9 | 9 | 9 | 9 | 9 |
| **Outliers Count** | 80 | 65 | 60 | 45 | 65 | 35 | 26 | 22 | 19 | 17 | 17 | 13 | 7 |
| **채택** |  |  |  |  | O |  |  |  |  |  |  |  |  |


<!--![](./Graph/군집결과.png)-->
<!--![](./Graph/아웃라이어결과.png)-->

![](./Graph/dbscan_outlier_3d_graph.png)

#### `아웃라이어 처리`

![](./Graph/아웃라이어처리.png)

---

## 3. Reflection

- 추천 정확도
	- 프로젝트를 통해 개발된 저녁 추천 시스템은 사용자의 식단과 영양소를 고려하여 맞춤형 저녁 메뉴를 추천합니다. 
	- 이를 위해 연관분석 알고리즘과 군집분석 알고리즘을 결합하여 사용자의 식단과 반찬들 간의 관련성을 도출하고, 영양소 기반으로 메뉴들을 군집화합니다.
	- 이를 통해 사용자의 식단에 적합한 메뉴를 추천할 수 있습니다.

- 다양성
	- 저녁 추천 시스템은 다양한 조합의 추천 메뉴를 제공하면서도 교집합된 아이템을 우선 추천합니다. 
	- 이를 통해 사용자에게 다양한 선택지를 제공하면서도 교집합된 아이템은 더욱 신뢰할 수 있는 추천으로 제공할 수 있습니다. 
	- 이는 사용자가 매번 다른 추천 결과를 받아볼 수 있도록 하여 사용자의 다양한 식사 경험을 도모하는 데 도움이 됩니다.

- 한계점과 개선 방향
	- 프로젝트에서는 사용자의 선호도나 식단에 대한 세부적인 정보를 고려하지 않고 영양소 정보만을 기반으로 추천을 수행합니다. 
	- 따라서 개인의 취향이나 식사 스타일에 맞지 않는 추천이 제공될 수 있습니다. 
	- 이를 극복하기 위해서는 사용자의 개인화된 데이터와 피드백을 수집하여 모델을 보완하고, 개인의 취향과 식사 스타일에 맞는 추천을 제공할 수 있는 방향으로 개선할 필요가 있습니다.

- 확장성과 응용 가능성
	- 이번 프로젝트에서 개발한 저녁 추천 시스템은 식단 데이터와 반찬 예측 알고리즘을 기반으로 동작합니다.
	- 이러한 방법론은 다른 식사 시간에도 확장하여 아침이나 점심 추천 시스템을 개발하는 데 활용될 수 있습니다. 
	- 또한, 사용자의 식단 데이터와 선호도를 고려하여 개인 맞춤형 식단 관리, 건강 유지 등 다양한 응용 분야에 활용할 수 있습니다.